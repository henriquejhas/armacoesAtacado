<!DOCTYPE html>

<html lang="pt-BR">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:image" itemprop="image" content="https://firebasestorage.googleapis.com/v0/b/minhas-lojas.appspot.com/o/minh%20loja.png?alt=media&amp;token=c3f3e950-a619-4b4c-a5a3-9e74e94ea251">
    <meta property="og:description" content="Todas as lojas em suas mãos, pesquise o melhor preço sem sair de casa">
    <meta property="og:title" content="Crie o seu site e entre nas pequisas da região">
    <meta property="og:site_name" content="siteminhaloja.com">
    <title>Minha loja</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="icon" href="{{ loja.logo }}">
    <style>
        * {
                box-sizing: border-box;
                font-family: "Montserrat", sans-serif;
        }
        body{
            background-color: rgba(0, 0, 0, 0.05);
        }

        .myImg {
          border-radius: 5px;
          cursor: pointer;
          transition: 0.3s;
        }

        .myImg:hover {opacity: 0.7;}

        .logo-conteiner{
            text-align: center;
            margin-bottom: 5px;
            overflow: hidden;
        }

        .banner-conteiner{
            max-height: 750px;
            overflow: hidden;
            text-align: center;
            margin-top: 0px;
            background-color: #ccc;
        }

        .logo, .banner{
            width: 100%;
        }


        /* The Modal (background) */
        .modal, .modal-excluir {
          display: none; /* Hidden by default */
          position: fixed; /* Stay in place */
          z-index: 1; /* Sit on top */
          padding-top: 90px; /* Location of the box */
          left: 0;
          top: 0;
          width: 100%; /* Full width */
          height: 100%; /* Full height */
          overflow: auto; /* Enable scroll if needed */
          background-color: rgb(0,0,0); /* Fallback color */
          background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }

        .modal-excluir{
            padding-top: 200px;

        }

        /* Modal Content (image) */
        .modal-content {
          margin: auto;
          display: block;
          width: 80%;
          max-width: 500px;
        }

        /* Caption of Modal Image */
        #caption {
          margin: auto;
          display: block;
          width: 80%;
          max-width: 700px;
          text-align: center;
          color: #ccc;
          padding: 10px 0;
          height: 150px;
        }

        /* Add Animation */
        .modal-content, #caption {
          -webkit-animation-name: zoom;
          -webkit-animation-duration: 0.6s;
          animation-name: zoom;
          animation-duration: 0.6s;
        }

        /* The Close Button */
        .close {
          position: absolute;
          top: 15px;
          right: 35px;
          color: #f1f1f1;
          font-size: 40px;
          font-weight: bold;
          transition: 0.3s;
        }

        .close:hover,
        .close:focus {
          color: #bbb;
          text-decoration: none;
          cursor: pointer;
        }

        .conteudo{
            width: 50%;
            text-align: center;
            font-size: 18px;
            border-radius: 12px;
            padding: 10px;
            margin:auto;
        }

        .sobre{
            text-align: justify;
            text-indent: 30px;
        }

        .lista{
            display: flex;
            flex-wrap: wrap;
            padding: 10px 10% 0;
            min-height: 300px;
        }

        .desc{
        height: 80px;
        overflow: auto;
        color: rgb(37, 37, 37);

        }

        .p2{
            height: 160px;
            text-align: center;

        }

        .p2 p {
            margin: 5px 0;
            font-size: 12px;
            text-overflow: ellipsis;

        }

        .suporte{
          width: 50px;
          height: 50px;
          border-radius: 50%;
          position: fixed;
          bottom: 5px;
          right: 5px;
          text-align: center;
          z-index: 50;
          display: block;
          font-size: 30px;
          padding: 2px 0px;
          color: white;
          border: none;
          background-color: #34af23;
          box-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .subir{
            background-color: #ccccec75;
            color: black;
            bottom: 60px;
            z-index:0;
        }

        .carrinho{
            background-color: #4CAF50;
            color: black;
            bottom: 5px;
            z-index:0;
            cursor:pointer;
        }

        .cabecalho{
            background-color: #305b37;
            padding: 8px 0 0;
        }

        .logo img{
            margin: auto;
            display: block;
        }

        .nav ul{
            margin: auto;
            text-align: center;
            padding: 0;
            box-sizing: border-box;

        }
        .nav ul li{
            display: inline-block;
            cursor: pointer;
            color: white;
            width: 19%;
            background-color: #0000005c;
            border-radius: 5px;
            padding:5px 0;
            margin-bottom:5px;

        }

        .nav ul li:hover{
           background-color: #aaa;
           color: black;

        }

        .banner img{
            width: 100%;
        }

        .sobre{
            padding: 1% 10%;
            text-align: center;
            background-color: #305b37;
            color: white;
        }

        .fotoLoja img{
            width: 100%;
            display: block;
        }

        .fotoLoja{
            padding: 0 0 0 10px;
            height: 300px;
            overflow: hidden;
        }

        .novidades{
            text-align: center;
        }

        .rodape{
            height: 70px;
            background-color: #305b37;
        }

        #galeria1, #galeria2, #galeria3, #galeria4{
            display: none;
            text-align: center;
        }



        #loading {
          position: fixed; /* Fixo na tela */
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5); /* Fundo semi-transparente */
          display: flex; /* Alinha os elementos */
          justify-content: center; /* Centraliza horizontalmente */
          align-items: center; /* Centraliza verticalmente */
          z-index: 100; /* Acima do conteúdo */
        }

        .loading-spinner {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          border: 5px solid #ccc; /* Cor da borda */
          border-color: #ccc transparent #ccc transparent; /* Cor da animação */
          animation: spin 1.2s linear infinite; /* Animação de rotação */
        }

         @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        #content {
          display: none; /* Esconde o conteúdo até carregar */
        }

        #pagina {
          display: none; /* Esconde o conteúdo até carregar */
        }

        .row::after {
          content: "";
          clear: both;
          display: table;
        }

        .column {
          float: left;
          width: 33.3%;
          margin-bottom: 16px;
          padding: 0 8px;
        }

        .social div{
            display: inline;
            font-size: 30px;
        }

        .social div a i{

            text-shadow: 2px 2px 2px  rgba(0,0,0,0.8);
            cursor: pointer;

        }
        .social div i a i:hover{
            color: black;
            text-shadow: 2px 2px 2px  #9c27b0;
        }

        .column_escolher{
            width: 100% !important;
            height: 100%;
            position: fixed;
            top: 0;
            background-color: #000000e3;
            z-index: 1;
        }

        .card {
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
          height:510px;
          background-color:white;
          position:relative;
          max-width:300px;
          margin-bottom: 5px;
          margin:auto;
          padding:0;
          font-zise:13px
        }

        .overlay {
          position: absolute;
          background-color: white;
          overflow: hidden;
          width: 0;
          height:100%;
          transition: .3s ease;
          transition-delay: 0.5s;
          box-shadow: 5px 5px 10px #00000040;
          z-index:1;
        }

        .card_escolher{
            position: absolute;
            top: 50%;
            left: 40%;
            transform: translate(-50%, -50%);
            width: 50%;
            border-radius:5px;
        }
        .overlay_escolher{
            height: 100%;
            left:none;
            bottom:none;
            top: 0;
            left: 99%;
            width: 85%;
            z-index: -1;
            border-radius:0 5px 5px 0;
            left:none;
        }

          .input-with-bottom-border {
            position: relative;
            padding-bottom: 8px;
            width: 200px; /* Define a largura do input */
          }

          .input-with-bottom-border input {
            width: 100%;
            padding: 10px;
            border: none;
            background: transparent;
          }

          .input-with-bottom-border::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 70%;
            height: 2px;
            background-color: #ccc; /* Define a cor da borda */
          }


          .input-with-bottom-border input:focus {
            outline: none;
          }

          .input-with-bottom-border::before {
            background-color: #{{ loja.cor }}; /* Define a cor da borda ao focar */
          }


          .campoCaixa{
            padding: 2px 4px;
            border:1px solid #ccc;
            border-radius: 6px;
            height: 35px;
            width: 100%;
            margin-bottom: 10px;
          }

          .acima::before{
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 70%;
            height: 2px;
            background-color: red;
          }

        @media  screen and (max-width: 850px) {
            .sobre{
                padding: 1% 2%;
            }
            .conteudo{
                width: 70%;
            }

        }

        /* 100% Image Width on Smaller Screens */
        @media only screen and (max-width: 700px){
          .modal-content {
                width: 90%;
          }


          .card_escolher{
               left: 28%;

            }
        }

         @media screen and (max-width: 650px) {
          .column {
            width: 50%;
            display: block;
            padding: 0;
          }
          .card {
            margin: 0 1%;
            font-zise:14px
          }
        }

        @media screen and (max-width: 600px){
            .lista{
                padding: 10px 3% 0;
            }
        }

        @media  screen and (max-width: 500px) {
            .nav ul li{
                display: inline-block;
                cursor: pointer;
                color: white;
                width: 31%;
                font-size: 13px;
                padding: 4px 0;
            }
            .log img{
                width: 200px;
            }
            .card {
                height:470px !important;
            }

            .conteudo{
                width: 95%;
            }
            .fotoLoja{
                padding: 0;
            }


        }
    </style>

    <style>

        .menu-closer {
            text-align: center;
            line-height: 40px;
            width: 40px;
            height: 40px;
            font-size: 35px;
            position: absolute;
            top: 0;
            left: 0;
            cursor:pointer;
            color: #{{ loja.cor }};
            margin: 15px;
        }

        .cart {
            margin-bottom: 20px;
        }

        .cart--area {
            min-height:440px;
            padding: 0px 10px 30px 15px;
        }

        .cart--item {
            display: flex;
            align-items: center;
        }

        .cart--item img {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            cursor:pointer;
        }

        .cart--item img:hover {
            opacity: 0.7;
        }

        .cart--item--qtarea {
            display: inline-flex;
            background-color: #eee;
            border-radius: 10px;
            height: 30px;
        }

        .cart--item-nome {
            line-height:2;
        }

        .cart--item--qt {
            line-height: 30px;
            font-size: 14px;
            color: #000;
        }

        .cart--item--qtarea button {
            border: 0;
            background-color: rgba(0, 0, 0, 0);
            font-size: 17px;
            outline: 0;
            cursor: pointer;
            padding: 0px 10px;
            color: #333;
        }

        .cart--totalitem {
            border-top: 1px solid #ddd;
            color: #555;
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            padding-top:4px;
        }



        .cart--totalitem.big {
            font-size: 20px;
            color: #000;
            font-weight: bold;
            margin-bottom: 12px;
            padding-top:5px;
        }

        .cart--item-subtotal{
            width: 100%;
            text-align: right;
        }

        .cart--finalizar {
            padding: 20px 30px;
            border-radius: 13px;
            background-color: #48d05f;
            color: #fff;
            cursor: pointer;
            text-align: center;
            margin-top: 20px;
            transition: all ease .2s;
        }

        .fundo-aside{
            width: 0px ;
            height: 100%;
            position: fixed;
            top: 0;
            right:0;
            background-color: "#0000";

        }

        .show{
            width: 450px;
        }

        aside {
            display: block;
            background-color: #fff;
            position: absolute;
            border-radius: 15px 0 0 15px;
            height: 95%;
            right: 0px;
            width: 0px;
            top:2.5%;
            overflow-x: hidden;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, .02);
        }

        .cart--details{
            padding: 0px 10px 30px 15px;
            width: 100%;
        }

        .pop{
            font-size: 14px;
            display: inline-block;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            line-height: 1.5;
            position: absolute;
            top: -4px;
            left: -4px;
        }

        .mini{
            top: 7px;
            left: -13px;
            font-size: 14px;
            width: 13px;
            height: 13px;
            display: none;
            color: #f44336;
        }

        .legenda{
            position: absolute;
            left: 0;
            top: -10px;
            background-color: #938d8d;
            min-width: 30px;
            color: white;
            font-size: 10px;
            border-radius: 15%;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .mini:hover .legenda{
            opacity:1;
        }



        @media  screen and (max-width: 550px) {
            aside.show {
                z-index: 99;
                width:95%;
            }
            .cart--item--qtarea button {
                padding: 0px 10px;
            }
            .cart--item--qt {
                line-height: 32px;
                min-width: 50px;
                text-align: center;
                display: inline-block;
            }

            .cart--item--qtarea {
                height: 30px;
            }

            .cart--area {
                width: 100%;
            }



        }

    </style>

</head>
<body>

    <div id="loading">
        <div class="loading-spinner"></div>
    </div>
    <div id="pagina">

        <div class="cabecalho" style="background-color: #{{ loja.cor }};">
            <div class="logo-conteiner">
                <div style="position: relative; display: inline-block; margin: auto; max-height: 100px; width:25%;">
                    <img class="logo" src="{{ loja.logo }}">
                </div>

            </div>
            <div class="nav">

                <ul>
                    <li id="op1" class="fonte" onclick="galerias('inicio')" style="color: #{{ loja.fonte }};">Início</li>

                    <li id="op2"  class="fonte" onclick="galerias('Galeria1','1')" style="color: #{{ loja.fonte }};">Femenino</li>

                    <li id="op3"  class="fonte" onclick="galerias('Galeria2','2')" style="color: #{{ loja.fonte }};">Maculino</li>

                    <li id="op4"  class="fonte" onclick="galerias('Galeria3','3')" style="color: #{{ loja.fonte }};">Infantil</li>

                    <li id="op5"  class="fonte" onclick="galerias('Galeria4','4')" style="color: #{{ loja.fonte }};">Solar</li>

                </ul>

            </div>
        </div>
        <div id="inicio" style="display: block;">
            <div class="banner-conteiner">
                <div style="position: relative; display: inline-block; margin: auto; width:100%;">
                    <img class="banner" src="{{ loja.banner }}">
                </div>

            </div>
            <div class="sobre" style="background-color: #{{ loja.cor }};">
                <div>
                    <h3 class="fonte" style="text-align: center; color: #{{ loja.fonte }};"><b>Sobre Nós:</b></h3>
                    <p id="historiaR" class="fonte" style="color: #{{ loja.fonte }}; text-align:justify;">{{ loja.sobre }}</p>
                </div>
                <br>
                <div class="w3-row">
                    <div class="w3-half fotoLoja" style="background: url('{{ loja.foto }}') no-repeat center; position: relative; max-height: 300px;">

                    </div>

                    <div class="w3-half" style="display: inline-block; text-align: center;">
                        <h3 class="fonte" style="color: #{{ loja.fonte }};"><b>Contatos:</b></h3>
                        <div style="text-align:left; display:inline-block;">


                            <div class="fonte" style="color: #{{ loja.fonte }}; margin:15px 0;">Endereço: <p id="enderecoR" style="display:inline;">{{ loja.endereco }}</p></div>

                            <div  class="fonte" style="color: #{{ loja.fonte }};  margin:15px 0;">Aberto: <p id="funcionamentoR" style="display:inline;">{{ loja.aberto}}</p></div>

                            <div class="social">
                                {% if loja.facebook != "" %}
                                    <div class="social__list__item"><a href="{{ loja.facebook }}" target="_blank" style="border-bottom: none;color:#3b5998;"><i class="fa fa-facebook-official" aria-hidden="true"></i></a></div>
                                {% endif %}
                                {% if loja.instagram != "" %}
                                    <div class="social__list__item"><a href="{{ loja.instagram }}" target="_blank" style="border-bottom: none; color:#d6249f;"><i class="fa fa-instagram" aria-hidden="true"></i></a></div>
                                {% endif %}
                                {% if loja.whatsapp != "" %}
                                    <div class="social__list__item"><a href="http://api.whatsapp.com/send?phone={{ loja.whatsapp }}" target="_blank" style="border-bottom: none; color:#34af23;"><i class="fa fa-whatsapp" aria-hidden="true"></i></a></div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                </div>

            </div>
            <div class="novidades" style="min-height:500px">
                <h3><b>Novidades</b></h3>
                <div class="row" style="font-size:13px !important;">

                    {% for i in range(-3, 0) %}

                            <div class="column" style="transition: background-color 0.5s ease;">
                                <div class="card" style="border-radius:5px; transition: transform 0.3s ease;">
                                    <img class="myImg" src="{{ armacoes[i][1]['imagem'] }}" alt="John" style="width:100%" onclick="abrirImagem(this)">
                                    <div style="font-zise:13px !important; position: absolute; height: 40%; width: 100%; text-align:left;" >
                                        <div style="font-zise:13px;">
                                          <div style="padding:0 3px">
                                              <p style="text-align:center;margin: 3px;">R$<b>{{ armacoes[i][1]['preco'] }}</b></p>
                                              <p style="margin: 3px">Código: <b>{{ armacoes[i][1]['codigo'] }}</b></p>
                                              <p style="margin: 3px">Dimensções <b>{{ armacoes[i][1]['dimensoes'] }}</b></p>
                                              <p style="margin: 3px">Seção: <b>{{ armacoes[i][1]['secao'] }}</b></p>
                                              <p style="font-size:13px;margin: 3px; text-align:justify;">Descrição: <b>{{ armacoes[i][1]['descricao'] }}</b></p>
                                          </div>
                                        </div>

                                    </div>
                                    <div  class="overlay" style="">
                                            <p style="text-align:center; margin:5px 0 0;"><b>Quantidade em estoque</b></p>
                                            <div class="row" style="padding-left:6px;">
                                                <input class="codigo-chave" type="hidden" value="{{armacoes[i][0]}}">
                                                <input type="hidden" value="{{ armacoes[i][1]['preco'] }}">
                                                <input type="hidden" value="{{ armacoes[i][1]['codigo'] }}">
                                                {%  for c in armacoes[i][1]['cores'] %}
                                                    {% if 'C10' not in c and armacoes[i][1]['cores'][c] > 0 %}
                                                        <p class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>{{c}}: </b>
                                                            <span class="input-with-bottom-border">
                                                                <input max="{{armacoes[i][1]['cores'][c]}}" min="0" name="{{c}}" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                            </span>
                                                            / <span  class="quant">{{armacoes[i][1]['cores'][c]}}</span>
                                                        </p>
                                                    {% endif %}
                                                {% endfor %}
                                                {% if 'C10' in armacoes[i][1]['cores'] and armacoes[i][1]['cores']['C10'] > 0 %}
                                                     <p class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>C10: </b>
                                                        <span class="input-with-bottom-border">
                                                            <input max="{{armacoes[i][1]['cores']['C10']}}" min="0" name="C10" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                        </span>
                                                         / <span class="quant">{{armacoes[i][1]['cores']['C10']}}</span>
                                                     </p>
                                                {% endif %}
                                                <p class="column C" style="text-align:center;width:100%; margin:0;">Total:<b class="total"></b></p>
                                            </div>
                                        <p onclick="fecharOverlay(this)" style="position:absolute; margin: 0 10px 10px 0; font-size: 16px; right:0; bottom:0;"><i  style="padding:0;bottom: 0px;" class="w3-button fa fa-times fa-2x" aria-hidden="true"></i></p>

                                        </div>
                                    <button onclick="escolher(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px;" class="w3-button w3-block w3-green w3-padding w3-large">Escolher</button>
                                    <button onclick="adicionar(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px; display:none;" class="w3-button w3-block w3-green w3-padding w3-large"><span style="margin-right:15px;">Adicionar</span><i class="fa fa-cart-plus" aria-hidden="true"></i></button>

                                </div>
                            </div>

                    {% endfor %}

                </div>
            </div>
        </div>

        <div id="galeria1" style="display: none;">
            <h3><b>Feminino</b></h3>

           <div class="row" style="min-height:400px; font-size:13px !important;">

               {% for chave, armacao in armacoes %}
                    {% if armacao['secao'] == 'Feminino' %}
                            <div class="column" style="transition: background-color 0.5s ease;">
                                <div class="card" style="border-radius:5px; transition: transform 0.3s ease;">
                                    <img class="myImg" src="{{ armacao['imagem'] }}" alt="John" style="width:100%" onclick="abrirImagem(this)">
                                    <div style="font-zise:13px !important; position: absolute; height: 40%; width: 100%; text-align:left;" >
                                        <div style="font-zise:13px;">
                                          <div style="padding:0 3px">
                                              <p style="text-align:center;margin: 3px;">R$<b>{{ armacao['preco'] }}</b></p>
                                              <p style="margin: 3px">Código: <b>{{ armacao['codigo'] }}</b></p>
                                              <p style="margin: 3px">Dimensções <b>{{ armacao['dimensoes'] }}</b></p>
                                              <p style="margin: 3px">Seção: <b>{{ armacao['secao'] }}</b></p>
                                              <p style="font-size:13px;margin: 3px; text-align:justify;">Descrição: <b>{{ armacao['descricao'] }}</b></p>
                                          </div>
                                        </div>

                                    </div>
                                    <div  class="overlay" style="">
                                            <p style="text-align:center; margin:5px 0 0;"><b>Quantidade em estoque</b></p>
                                            <div class="row" style="padding-left:6px;">
                                                <input class="codigo-chave" type="hidden" value="{{chave}}">
                                                <input type="hidden" value="{{ armacao['preco'] }}">
                                                <input type="hidden" value="{{ armacao['codigo'] }}">
                                                {%  for c in armacao['cores'] %}
                                                    {% if 'C10' not in c and armacao['cores'][c] > 0 %}
                                                        <p class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>{{c}}: </b>
                                                            <span class="input-with-bottom-border">
                                                                <input max="{{armacao['cores'][c]}}" min="0" name="{{c}}" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                            </span>
                                                            / <span  class="quant">{{armacao['cores'][c]}}</span>
                                                        </p>
                                                    {% endif %}
                                                {% endfor %}
                                                {% if 'C10' in armacao['cores'] and armacao['cores']['C10'] > 0 %}
                                                     <p class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>C10: </b>
                                                        <span class="input-with-bottom-border">
                                                            <input max="{{armacao['cores']['C10']}}" min="0" name="C10" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                        </span>
                                                         / <span class="quant">{{armacao['cores']['C10']}}</span>
                                                     </p>
                                                {% endif %}
                                                <p class="column" style="text-align:center;width:100%; margin:0;">Total:<b class="total"></b></p>
                                            </div>
                                        <p onclick="fecharOverlay(this)" style="position:absolute; margin: 0 10px 10px 0; font-size: 16px; right:0; bottom:0;"><i  style="padding:0;bottom: 0px;" class="w3-button fa fa-times fa-2x" aria-hidden="true"></i></p>

                                        </div>
                                    <button onclick="escolher(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px;" class="w3-button w3-block w3-green w3-padding w3-large">Escolher</button>
                                    <button onclick="adicionar(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px; display:none;" class="w3-button w3-block w3-green w3-padding w3-large"><span style="margin-right:15px;">Adicionar</span><i class="fa fa-cart-plus" aria-hidden="true"></i></button>

                                </div>
                            </div>
                    {% endif %}

               {% endfor %}

           </div>
            <a href="#galeria1" class="w3-card-4 suporte subir" ><i class="fa fa-angle-double-up"></i></a>
        </div>

        <div id="galeria2" style="display: none;">
            <h3><b>Masculino</b></h3>

            <div class="row" style="min-height:400px; font-size:13px !important;">
               {% for chave, armacao in armacoes %}
                    {% if armacao['secao'] == 'Masculino' %}
                        <div class="column" style="transition: background-color 0.5s ease;">
                            <div class="card" style="border-radius:5px; transition: transform 0.3s ease;">
                                <img class="myImg" src="{{ armacao['imagem'] }}" alt="John" style="width:100%" onclick="abrirImagem(this)">
                                <div style="font-zise:13px !important; position: absolute; height: 40%; width: 100%; text-align:left;" >
                                    <div style="font-zise:13px;">
                                      <div style="padding:0 3px">
                                          <p style="text-align:center;margin: 3px;">R$<b>{{ armacao['preco'] }}</b></p>
                                          <p style="margin: 3px">Código: <b>{{ armacao['codigo'] }}</b></p>
                                          <p style="margin: 3px">Dimensções <b>{{ armacao['dimensoes'] }}</b></p>
                                          <p style="margin: 3px">Seção: <b>{{ armacao['secao'] }}</b></p>
                                          <p style="font-size:13px;margin: 3px; text-align:justify;">Descrição: <b>{{ armacao['descricao'] }}</b></p>
                                      </div>
                                    </div>

                                </div>
                                <div  class="overlay" style="">
                                        <p style="text-align:center; margin:5px 0 0;"><b>Quantidade em estoque</b></p>
                                        <div class="row" style="padding-left:6px;">
                                            <input class="codigo-chave" type="hidden" value="{{chave}}">
                                            <input type="hidden" value="{{ armacao['preco'] }}">
                                            <input type="hidden" value="{{ armacao['codigo'] }}">
                                            {%  for c in armacao['cores'] %}
                                                {% if 'C10' not in c and armacao['cores'][c] > 0 %}
                                                    <p class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class=" pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>{{c}}: </b>
                                                        <span class="input-with-bottom-border">
                                                            <input max="{{armacao['cores'][c]}}" min="0" name="{{c}}" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                        </span>
                                                        / <span  class="quant">{{armacao['cores'][c]}}</span>
                                                    </p>
                                                {% endif %}
                                            {% endfor %}
                                            {% if 'C10' in armacao['cores'] and armacao['cores']['C10'] > 0 %}
                                                 <p class="column" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class=" pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>C10: </b>
                                                    <span class="input-with-bottom-border">
                                                        <input max="{armacao['cores']['C10']}}" min="0" name="C10" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                    </span>
                                                     / <span class="quant">{{armacao['cores']['C10']}}</span>
                                                 </p>
                                            {% endif %}
                                            <p class="column C" style="text-align:center;width:100%; margin:0;">Total:<b class="total"></b></p>
                                        </div>
                                    <p onclick="fecharOverlay(this)" style="position:absolute; margin: 0 10px 10px 0; font-size: 16px; right:0; bottom:0;"><i  style="padding:0;bottom: 0px;" class="w3-button fa fa-times fa-2x" aria-hidden="true"></i></p>

                                    </div>
                                <button onclick="escolher(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px;" class="w3-button w3-block w3-green w3-padding w3-large">Escolher</button>
                                <button onclick="adicionar(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px; display:none;" class="w3-button w3-block w3-green w3-padding w3-large"><span style="margin-right:15px;">Adicionar</span><i class="fa fa-cart-plus" aria-hidden="true"></i></button>

                            </div>
                        </div>
                    {% endif %}

               {% endfor %}

            </div>
            <a href="#galeria2" class="w3-card-4 suporte subir" ><i class="fa fa-angle-double-up"></i></a>

        </div>

        <div id="galeria3" style="display: none;">
            <h3><b>Infantil</b></h3>

            <div class="row" style="min-height:400px; font-size:13px !important;">
               {% for chave, armacao in armacoes %}
                    {% if armacao['secao'] == 'Infantil' %}
                       <div class="column" style="transition: background-color 0.5s ease;">
                            <div class="card" style="border-radius:5px; transition: transform 0.3s ease;">
                                <img class="myImg" src="{{ armacao['imagem'] }}" alt="John" style="width:100%" onclick="abrirImagem(this)">
                                <div style="font-zise:13px !important; position: absolute; height: 40%; width: 100%; text-align:left;" >
                                    <div style="font-zise:13px;">
                                      <div style="padding:0 3px">
                                          <p style="text-align:center;margin: 3px;">R$<b>{{ armacao['preco'] }}</b></p>
                                          <p style="margin: 3px">Código: <b>{{ armacao['codigo'] }}</b></p>
                                          <p style="margin: 3px">Dimensções <b>{{ armacao['dimensoes'] }}</b></p>
                                          <p style="margin: 3px">Seção: <b>{{ armacao['secao'] }}</b></p>
                                          <p style="font-size:13px;margin: 3px; text-align:justify;">Descrição: <b>{{ armacao['descricao'] }}</b></p>
                                      </div>
                                    </div>

                                </div>
                                <div  class="overlay" style="">
                                        <p style="text-align:center; margin:5px 0 0;"><b>Quantidade em estoque</b></p>
                                        <div class="row" style="padding-left:6px;">
                                            <input class="codigo-chave" type="hidden" value="{{chave}}">
                                            <input type="hidden" value="{{ armacao['preco'] }}">
                                            <input type="hidden" value="{{ armacao['codigo'] }}">
                                            {%  for c in armacao['cores'] %}
                                                {% if 'C10' not in c and armacao['cores'][c] > 0 %}
                                                    <p class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>{{c}}: </b>
                                                        <span class="input-with-bottom-border">
                                                            <input max="{{armacao['cores'][c]}}" min="0" name="{{c}}" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                        </span>
                                                        / <span  class="quant">{{armacao['cores'][c]}}</span>
                                                    </p>
                                                {% endif %}
                                            {% endfor %}
                                            {% if 'C10' in armacao['cores'] and armacao['cores']['C10'] > 0 %}
                                                 <p class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>C10: </b>
                                                    <span class="input-with-bottom-border">
                                                        <input max="{{armacao['cores']['C10']}}" min="0" name="C10" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                    </span>
                                                     / <span class="quant">{{armacao['cores']['C10']}}</span>
                                                 </p>
                                            {% endif %}
                                            <p class="column C" style="text-align:center;width:100%; margin:0;">Total:<b class="total"></b></p>
                                        </div>
                                    <p onclick="fecharOverlay(this)" style="position:absolute; margin: 0 10px 10px 0; font-size: 16px; right:0; bottom:0;"><i  style="padding:0;bottom: 0px;" class="w3-button fa fa-times fa-2x" aria-hidden="true"></i></p>

                                    </div>
                                <button onclick="escolher(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px;" class="w3-button w3-block w3-green w3-padding w3-large">Escolher</button>
                                <button onclick="adicionar(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px; display:none;" class="w3-button w3-block w3-green w3-padding w3-large"><span style="margin-right:15px;">Adicionar</span><i class="fa fa-cart-plus" aria-hidden="true"></i></button>

                            </div>
                        </div>
                    {% endif %}

               {% endfor %}

            </div>
            <a href="#galeria3" class="w3-card-4 suporte subir" ><i class="fa fa-angle-double-up"></i></a>

        </div>

        <div id="galeria4" style="display: none;">
            <h3><b>Solar</b></h3>

             <div class="row" style="min-height:400px; font-size:13px !important;">
               {% for chave, armacao in armacoes %}
                    {% if armacao['secao'] == 'Solar' %}
                        <div class="column" style="transition: background-color 0.5s ease;">
                            <div class="card" style="border-radius:5px; transition: transform 0.3s ease;">
                                <img class="myImg" src="{{ armacao['imagem'] }}" alt="John" style="width:100%" onclick="abrirImagem(this)">
                                <div style="font-zise:13px !important; position: absolute; height: 40%; width: 100%; text-align:left;" >
                                    <div style="font-zise:13px;">
                                      <div style="padding:0 3px">
                                          <p style="text-align:center;margin: 3px;">R$<b>{{ armacao['preco'] }}</b></p>
                                          <p style="margin: 3px">Código: <b>{{ armacao['codigo'] }}</b></p>
                                          <p style="margin: 3px">Dimensções <b>{{ armacao['dimensoes'] }}</b></p>
                                          <p style="margin: 3px">Seção: <b>{{ armacao['secao'] }}</b></p>
                                          <p style="font-size:13px;margin: 3px; text-align:justify;">Descrição: <b>{{ armacao['descricao'] }}</b></p>
                                      </div>
                                    </div>

                                </div>
                                <div  class="overlay" style="">
                                        <p style="text-align:center; margin:5px 0 0;"><b>Quantidade em estoque</b></p>
                                        <div class="row" style="padding-left:6px;">
                                            <input class="codigo-chave" type="hidden" value="{{chave}}">
                                            <input type="hidden" value="{{ armacao['preco'] }}">
                                            <input type="hidden" value="{{ armacao['codigo'] }}">
                                            {%  for c in armacao['cores'] %}
                                                {% if 'C10' not in c and armacao['cores'][c] > 0 %}
                                                    <p  class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>{{c}}: </b>
                                                        <span class="input-with-bottom-border">
                                                            <input  max="{{armacao['cores'][c]}}" min="0" name="{{c}}" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                        </span>
                                                        / <span  class="quant">{{armacao['cores'][c]}}</span>
                                                    </p>
                                                {% endif %}
                                            {% endfor %}
                                            {% if 'C10' in armacao['cores'] and armacao['cores']['C10'] > 0 %}
                                                 <p  class="column C" style="text-align:center;width:100%; margin:0 0 5px 0;"><b style="position:relative;"><span class="pop mini"><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>C10: </b>
                                                    <span class="input-with-bottom-border">
                                                        <input  max="{{armacao['cores']['C10']}}" min="0" name="C10" style="width: 60px; padding:4px 2px; " type="number" value="0">
                                                    </span>
                                                     / <span class="quant">{{armacao['cores']['C10']}}</span>
                                                 </p>
                                            {% endif %}
                                            <p class="column" style="text-align:center;width:100%; margin:0;">Total:<b class="total"></b></p>
                                        </div>
                                    <p onclick="fecharOverlay(this)" style="position:absolute; margin: 0 10px 10px 0; font-size: 16px; right:0; bottom:0;"><i  style="padding:0;bottom: 0px;" class="w3-button fa fa-times fa-2x" aria-hidden="true"></i></p>

                                    </div>
                                <button onclick="escolher(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px;" class="w3-button w3-block w3-green w3-padding w3-large">Escolher</button>
                                <button onclick="adicionar(this)" style="position: absolute; bottom: 0px; left:0px;border-radius:5px; display:none;" class="w3-button w3-block w3-green w3-padding w3-large"><span style="margin-right:15px;">Adicionar</span><i class="fa fa-cart-plus" aria-hidden="true"></i></button>

                            </div>
                        </div>
                    {% endif %}

               {% endfor %}

            </div>
            <a href="#galeria4" class="w3-card-4 suporte subir" ><i class="fa fa-angle-double-up"></i></a>

        </div>
        <a onclick="abrirCarrinho()" class="w3-card-4 suporte carrinho" ><span id="notificacao" class="w3-red pop">0</span><i class="fa fa-shopping-cart" aria-hidden="true"></i></a>

</div>



<div class="fundo-aside">
    <aside  style="">
        <div class="menu-closer" onclick="fecharCarrinho(this)">
            <i class="fa fa-arrow-left" aria-hidden="true"></i>
        </div>
    <div class="cart--area">

      <h2 style="text-align:center;">Carrinho</h2>
      <div class="cart">

      </div>

    </div>
        <div class="cart--details">
            <form action="" method="post" id="instagram">
                <div class="cart--totalitem total big">
                  <span>Total</span>
                  <span>R$ <span id="total">0</span></span>
                </div>
                {{ form.csrf_token() }}
                    <input autocomplete="false" class="campoCaixa" id="nome" maxlength="100" minlength="1" name="nome" placeholder="Digite o seu nome" required="" type="text" value="">

                    <input autocomplete="false" class="campoCaixa" id="whatsapp" maxlength="14" minlength="1" name="whatsapp" placeholder="Digite seu Whatsapp" required="" type="text" value="">

                <div onclick="enviarPedido()" style="border-radius:5px;" class="w3-button w3-block w3-green w3-padding w3-large">Enviar Pedido</div>
            </form>
        </div>

  </aside>

</div>
<!-- The Modal -->
<div id="myModal" class="modal w3-animate-zoom">
  <span class="close" onclick="fecharImagem()">&times;</span>
  <img class="modal-content" id="img01" src="">

</div>

<script>

    if(localStorage.getItem("carrinho") == null){
        var carrinhoInicio = [];
        localStorage.setItem("carrinho",JSON.stringify(carrinhoInicio));

    }else{
        var objetoJSON = localStorage.getItem("carrinho");
        var carrinhoInicio = JSON.parse(objetoJSON);
        document.getElementById("notificacao").textContent = carrinhoInicio.length;
    }


    function enviarPedido(){

         var objetoJSON = localStorage.getItem("carrinho");
         var carrinho = JSON.parse(objetoJSON);

         cliente = $("#nome").val();
         celular = $("#whatsapp").val();
         total = $("#total").text();
         var dataAtual = new Date();
         var dia = dataAtual.getDate();
         var mes = dataAtual.getMonth() + 1;
         var ano = dataAtual.getFullYear();
         var dataCliente =`${dia}/${mes}/${ano}`;
         var loja = "{{nome}}";
         if(loja == "0"){
            loja = "{{loja.nomeLoja}}";
            loja = loja.toLowerCase().replace(/\s/g, '');
            console.log(loja)
         }
         if(cliente != "" && celular.length == 14){
             fetch('{{url_for('carrinho')}}' , {
                method: 'POST',
                headers: {
                    'X-CSRFToken': {{ csrf_token()|tojson }},
                    'Content-Type': 'application/json'
                },
                body:JSON.stringify({
                    'cliente': cliente,
                    'celular': celular,
                    'loja': loja,
                    'carrinho': carrinho,
                    'total': total,
                    'data': dataCliente
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log(data)
                if(data.mensagem == true){
                    var numero = data.numero;
                    pedido = 'http://api.whatsapp.com/send?phone=5582987333558&text=Olá,%20meu%20nome%20é%20' + cliente + '.%0A' +
                    'Esse%20é%20o%20meu%20pedido%20' + numero + ':%0A'
                    for(var i = 0; i < carrinho.length; i++){
                       cores = Object.keys(carrinho[i].cores);
                       for(var j = 0; j < cores.length; j++){
                            var codigo = '*' +carrinho[i].codigo + '*%20-%20*' + cores[j] + '*%20%20'
                            codigo = codigo + '-'.repeat(40 - codigo.length);
                            pedido += codigo + '%20%20%20quant:%20*' + carrinho[i].cores[cores[j]][0] + '*%0A'
                       }
                    }
                    $("#nome").val("");
                    $("#whatsapp").val("");
                    localStorage["carrinho"] = "[]";
                    document.getElementById("notificacao").textContent = 0;
                    document.location = pedido;

                }else{
                    mensagemR("Erro ao enviar pedido!" + data.erro);
                }

            })
            .catch(error => {
                console.log('Erro:', error);
                mensagemR("Erro ao enviar pedido!");
            });
         }else if(cliente == ""){
            mensagemR("O Campo nome deve ser preechido!");

         }else if(celular.length < 14){
            mensagemR("Número do whatsapp incompleto!")
         }



    }


    function chamarExcluir(chave, cor){
        $(".cart").append('<div class="modal-excluir" id="mensagem" style="display:block;   ">\
        <div class="conteudo w3-container  w3-card-4 w3-animate-zoom w3-white f">\
            <p>Você que excluir esse item do carrinho?</p>\
            <div style="display:flex; justify-content: space-between;">\
                <button onclick="excluir(\'' + chave + '\',\'' + cor + '\')" style="width:30%; padding: 4px 8px; margin-left: 40px; border-radius:5px;font-size:14px;" class="w3-button w3-green">Sim</button>\
                <button onclick="naoExcluir(this)" style="width:30%; padding: 4px 8px; margin-right: 40px; border-radius:5px;font-size:14px;" class="w3-button w3-red">Não</button>\
            </div>\
        </div>\
        <div class="fundo" id="fundoInstagram"></div>\
        </div>');
    }

    function naoExcluir(elemento){
        $("#mensagem").remove()
    }

    function excluir(chave, cor){
        var objetoJSON = localStorage.getItem("carrinho");
        var carrinho = JSON.parse(objetoJSON);

        for(var i = 0; i < carrinho.length; i++){
            if(carrinho[i].chave == chave){
                if( Object.keys(carrinho[i].cores).length > 1){
                    console.log("passou aqui1, " + Object.keys(carrinho[i].cores).length)
                    delete carrinho[i].cores[cor]
                }else{
                    console.log("passou aqui2, " + Object.keys(carrinho[i].cores).length)
                    carrinho.splice(i, 1);
                }

            }

        }
        localStorage.setItem("carrinho",JSON.stringify(carrinho));
        $("#mensagem").remove()
        abrirCarrinho();
    }

    function abrirCarrinho(){
        var total = parseFloat(0);
        var objetoJSON = localStorage.getItem("carrinho");
        var carrinho = JSON.parse(objetoJSON);
        $(".cart").empty();
        for(var i = 0; i < carrinho.length; i++){
            var keys = Object.keys(carrinho[i]["cores"]);
            for(var j = 0; j < keys.length; j++){
                total += (carrinho[i].preco * carrinho[i].cores[keys[j]][0]);
                $(".cart").append('<div class="cart--item cart--totalitem"> \
                                  <div> \
                                      <img src="' + carrinho[i].img +  '" onclick="abrirImagem(this)">\
                                  </div>\
                                  <div style="width: 100%; justify-content: space-between; flex-wrap: wrap;display:flex;">\
                                      <div class="cart--item-nome"> ' + carrinho[i].codigo + ' | ' + keys[j] + '</div>\
                                      <div class="cart--item--qtarea">\
                                        <button class="cart--item-qtmenos" onclick="diminuir(this,\'' + carrinho[i].chave + '\', \'' + keys[j] + '\')">-</button>\
                                        <div class="cart--item--qt"><b>' + carrinho[i].cores[keys[j]][0] + '</b>/' + carrinho[i].cores[keys[j]][1] + '</div>\
                                        <button class="cart--item-qtmais" onclick="aumentar(this,\'' + carrinho[i].chave + '\', \'' + keys[j] + '\')">+</button>\
                                      </div>\
                                      <div class="cart--item-subtotal" style="display: flex;justify-content: space-between;">\
                                            <div style="inline-block; text-align: left;">valor:R$ ' + carrinho[i].preco.toFixed(2).replace(".",",") + '</div>\
                                            <div style="inline-block;">Subtotal: R$<span class="subtotal"> ' + (carrinho[i].preco * carrinho[i].cores[keys[j]][0]).toFixed(2).replace(".",",") + '</span></div>\
                                      </div>\
                                  </div>\
                             </div>');
            }
        }

        document.getElementById("total").textContent = new Intl.NumberFormat('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(total);
        var fundo = document.getElementsByClassName("fundo-aside")[0];
        fundo.style.transition = "background 0.5s ease";
        fundo.style.width = "100%";
        fundo.style.backgroundColor = "#000000e3";
        var carrinho = document.getElementsByTagName("ASIDE")[0];
        carrinho.style.transition = "width 0.3s ease 0.3s";
        carrinho.classList.add("show");

    }


    function aumentar(elemento, chave, cor){
        var total = parseFloat(0);
        var objetoJSON = localStorage.getItem("carrinho");
        var carrinho = JSON.parse(objetoJSON);
        carrinho.filter((armacao) =>{
            if(armacao.chave == chave){
                if(armacao.cores[cor][0] < armacao.cores[cor][1]){
                    armacao.cores[cor][0] += 1;
                    elemento.previousElementSibling.textContent = armacao.cores[cor][0] + "/" + armacao.cores[cor][1];
                    elemento.parentNode.nextElementSibling.children[1].children[0].textContent = new Intl.NumberFormat('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format((armacao.cores[cor][0] * armacao.preco));

                }
                }
            var keys = Object.keys(armacao["cores"]);
            for(var i = 0; i < Object.keys(armacao["cores"]).length; i++){
                total += (armacao["cores"][keys[i]][0]  * armacao.preco) ;
            }

        });
        document.getElementById("total").textContent = new Intl.NumberFormat('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(total);
        localStorage.setItem("carrinho",JSON.stringify(carrinho));
    }

    function diminuir(elemento, chave, cor){
        var total = parseFloat(0);
        var objetoJSON = localStorage.getItem("carrinho");
        var carrinho = JSON.parse(objetoJSON);
        carrinho.filter((armacao) =>{
            if(armacao.chave == chave){
                if(armacao.cores[cor][0] > 1){

                    armacao.cores[cor][0] -= 1;
                    elemento.nextElementSibling.textContent = armacao.cores[cor][0] + "/" + armacao.cores[cor][1];
                    elemento.parentNode.nextElementSibling.children[1].children[0].textContent = new Intl.NumberFormat('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format((armacao.cores[cor][0] * armacao.preco));

                }else if(armacao.cores[cor][0] == 1){

                    chamarExcluir(chave, cor);
                }
             }
            var keys = Object.keys(armacao["cores"]);
            for(var i = 0; i < Object.keys(armacao["cores"]).length; i++){
                total += (armacao["cores"][keys[i]][0]  * armacao.preco) ;
            }

        });
        document.getElementById("total").textContent = new Intl.NumberFormat('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(total);
        localStorage.setItem("carrinho",JSON.stringify(carrinho));
    }

    function adicionar(elemento){

        var overlay = elemento.previousElementSibling.previousElementSibling;
        var ok = false;
        lista = overlay.getElementsByTagName("INPUT");
        var objetoJSON = localStorage.getItem("carrinho");
        var carrinho = JSON.parse(objetoJSON);

        var chave = lista[0].value;
        var preco = parseFloat((lista[1].value).replace(",","."));
        var codigo = lista[2].value;
        var img = overlay.previousElementSibling.previousElementSibling.src;
        var armacao = {};
        var tem = carrinho.filter((obj) => obj.chave === lista[0].value);
        if(tem.length){

            armacao = tem[0];
            for(var i = 3; i < lista.length; i++){
                if(lista[i].value != "" && lista[i].value != "0"){
                    ok = true;
                    var quantidade = Math.abs(parseInt(lista[i].value));
                    if(typeof quantidade === 'number' && !isNaN(quantidade)){

                            if(armacao.cores[lista[i].name]!= undefined){
                                if((armacao.cores[lista[i].name][0] + parseInt(quantidade)) <= armacao.cores[lista[i].name][1]){
                                    armacao.cores[lista[i].name][0] += parseInt(quantidade);
                                }else{
                                    lista[i].parentNode.classList.add("acima");
                                    mensagemR("Quantidade acima do estoque. Verifique o carrinho!");
                                    return
                                }
                            }else{
                                armacao.cores[lista[i].name] = [parseInt(quantidade),parseInt(lista[i].max)];
                            }
                    }
                }
                lista[i].value = "0";
            }
        }else{
            armacao["chave"] = chave;
            armacao["codigo"] = codigo;
            armacao["img"] = img;
            if(typeof preco === 'number' && !isNaN(preco)){
                armacao["preco"] = preco;
            }
            armacao["cores"] = {};
            for(var i = 3; i < lista.length; i++){
                if(lista[i].value != "" && lista[i].value != "0"){
                    ok = true;
                    var quantidade = Math.abs(parseInt(lista[i].value));
                    if(typeof quantidade === 'number' && !isNaN(quantidade)){
                        armacao.cores[lista[i].name] = [parseInt(quantidade),parseInt(lista[i].max)];

                    }
                    lista[i].value = "0";

                }
            }
            carrinho.push(armacao);

        }

        if(!ok){
            mensagemR("Nenhuma quantidade informada!");
        }else{
            localStorage.setItem("carrinho",JSON.stringify(carrinho));
            document.getElementById("notificacao").textContent = carrinho.length;

            elemento.parentNode.parentNode.classList.remove('column_escolher');
            elemento.parentNode.classList.remove('card_escolher');
            elemento.previousElementSibling.style.display = "inline-block";
            overlay.style.transition = "none";
            overlay.classList.remove("overlay_escolher");
            elemento.style.display = "none";
        }
    }

    function escolher(elemento){
        var objetoJSON = localStorage.getItem("carrinho");
        var carrinho = JSON.parse(objetoJSON);
        overlay = elemento.previousElementSibling;
        var listaTem = overlay.getElementsByClassName("C");
        var codigoChave = overlay.getElementsByClassName("codigo-chave")[0];
        var armacao = "";
        var tem = carrinho.filter((obj) => obj.chave === codigoChave.value);
        if(tem.length){
            armacao = tem[0];
            for(var i = 0; i < (listaTem.length - 1); i++){
                var noCarrinho = "";
                if(listaTem[i].children[1].classList.contains("acima")){
                    listaTem[i].children[1].classList.remove("acima");
                }
                noCarrinho = listaTem[i].childNodes[0].textContent.replace(": ","");
                if(noCarrinho in armacao["cores"]){
                    listaTem[i].childNodes[0].childNodes[0].style.display = "block";
                    var filho = document.createElement("span");
                    filho.textContent = armacao.cores[noCarrinho][0];
                    filho.style.position = "absolute";
                    filho.classList.add("legenda");
                    listaTem[i].childNodes[0].childNodes[0].appendChild(filho)

                }
            }
        }
        overlay.style.transition = "0.3s ease 0.3s";
        overlay.classList.add("overlay_escolher");
        lista = overlay.getElementsByClassName("quant")
        var total = 0;
        for(var i = 0; i < lista.length; i++){

            total += parseInt(lista[i].textContent)

        }
        overlay.getElementsByClassName("total")[0].textContent = total

        elemento.parentNode.parentNode.classList.add('column_escolher');
        elemento.parentNode.classList.add('card_escolher');
        elemento.nextElementSibling.style.display = "inline-block";
        elemento.style.display = "none";


    }

    function fecharCarrinho(elemento){

        elemento.parentNode.style.transition = "all 0.5s ease";
        elemento.parentNode.classList.remove("show");
        elemento.parentNode.parentNode.style.transition = "width 0.5s ease 0.4s,background 0.5s ease";
        elemento.parentNode.parentNode.style.backgroundColor = "#0000";
        elemento.parentNode.parentNode.style.width = "0px";
        $(".cart").text("");
    }

    function fecharOverlay(elemento){
        elemento.parentNode.parentNode.parentNode.classList.remove('column_escolher');
        elemento.parentNode.parentNode.classList.remove('card_escolher');
        elemento.parentNode.nextElementSibling.style.display = "inline-block";
        elemento.parentNode.nextElementSibling.nextElementSibling.style.display = "none";
        elemento.parentNode.classList.remove("overlay_escolher");
        var overlay = elemento.parentNode;
        lista = lista = overlay.getElementsByTagName("INPUT");
        for(var i = 3; i < lista.length; i++){
            lista[i].value = "0";
        }
        elemento.parentNode.style.transition = "none";
    }



    window.onload = function() {
      document.getElementById("loading").style.display = "none";
      document.getElementById("pagina").style.display = "block";
    };


    function galerias(galeria,valor){
        switch(galeria){
            case "inicio":
                console.log("***************" + galeria);
                $("#galeria").val("");
                $("#galeria1, #galeria2, #galeria3, #galeria4").css("display", "none");
                $("#inicio").css("display", "block");
                $("#op1").css("background-color", "#b2b2bbb8");
                $("#op2, #op3, #op4, #op5").css("background-color", "#0000005c");
                break;
            case "Galeria1":
                console.log("***************" + galeria);
                $("#galeria").val(valor);
                $("#inicio, #galeria2, #galeria3, #galeria4").css("display", "none");
                $("#galeria1").css("display", "block");
                $("#op2").css("background-color", "#b2b2bbb8");
                $("#op1, #op3, #op4, #op5").css("background-color", "#0000005c");
                break;
            case "Galeria2":
                console.log("***************" + galeria);
                $("#galeria").val(valor);
                $("#inicio, #galeria1, #galeria3, #galeria4").css("display", "none");
                $("#galeria2").css("display", "block");
                $("#op3").css("background-color", "#b2b2bbb8");
                $("#op2, #op1, #op4, #op5").css("background-color", "#0000005c");
                break;
            case "Galeria3":
                console.log("***************" + galeria);
                $("#galeria").val(valor);
                $("#inicio, #galeria1, #galeria2, #galeria4").css("display", "none");
                $("#galeria3").css("display", "block");
                $("#op4").css("background-color", "#b2b2bbb8");
                $("#op2, #op3, #op1, #op5").css("background-color", "#0000005c");
                break;
            case "Galeria4":
                console.log("***************" + galeria);
                $("#galeria").val(valor);
                $("#inicio, #galeria1, #galeria2, #galeria3").css("display", "none");
                $("#galeria4").css("display", "block");
                $("#op5").css("background-color", "#b2b2bbb8");
                $("#op2, #op3, #op4, #op1").css("background-color", "#0000005c");
                break;

        }
    }




    function fecharImagem() {
      var modal = document.getElementById("myModal");
      modal.style.display = "none";
    }

    function abrirImagem(elemento){
    // Get the image and insert it inside the modal - use its "alt" text as a caption
      var modal = document.getElementById("myModal");
      var modalImg = document.getElementById("img01");

      modal.style.display = "block";
      modalImg.src = elemento.src;

    }




    function fecharCores(elemento){

        pai = elemento.parentNode;
        overlay = pai.parentNode;
        overlay.style.bottom = "100%";
        overlay.style.height = "0";

    }


    function mensagemR(msg){
        document.getElementById("mensagemR").textContent = msg
         $("#msg2").css("display", "flex");
            $("#msg2").css("opacity", "1");
            setTimeout(()=>{
               $("#msg2").css("opacity", "0");

               setTimeout(() => $("#msg2").css("display", "none"),1000);
            } ,4000);

    }

    function celular(element){
        element.style.backgroundColor = "white";
        element.addEventListener("input",function(e){
            var val = this.value.replace(",", "").split("");
            var s = "";

            if(val[val.length - 1].search("[0-9]") != -1 ){


                    if(val.length == 3){
                        val.splice(0,0,"(");
                        val.splice(val.length -1,0,")");
                    }else if( val.length == 10){
                        val.splice(val.length -1,0, "-");
                    }


            }else{

                  val.splice(val.length - 1,1);


            }

            for(var i = 0; i < val.length; i++){
                s += val[i];

            }

            this.value = s;

        });

    }

     celular(document.getElementById("whatsapp"))
    //document.location = 'http://api.whatsapp.com/send?phone=5582987333558&text=Olá%20meu%20nome%20é%20' + data.nome + ',%20moro%20no%20endereço:%20'+ data.endereco +',%20eu%20gostaria%20de%20comprar%20a%20armação%20'+ data.oculos;

</script>


{% if mensagem  %}
      <div id="msg" style="z-index:1; opacity: 0; transition: 0.9s; text-align:center; width:100%; height:80px; position:fixed;bottom:10%;">
        <div style="border-radius: 16px; display:inline-block; width:50%; margin:auto; background-color: #3d3d3de6; text-shadow: 1px 1px black; color:white;">
          <p>{{ mensagem }}</p>
          <script>
                $("#msg").css("display", "flex");
                $("#msg").css("opacity", "1");
                setTimeout(()=>{
                   $("#msg").css("opacity", "0");

                   setTimeout(() => $("#msg").css("display", "none"),1000);
                } ,4000);

           </script>
        </div>
      </div>
  {% endif %}

<div id="msg2" style="margin: auto; left: 0; right: 0; z-index:1; opacity: 0; transition: 0.9s; text-align:center; width:60%; height:80px; position:fixed;bottom:10%; display:none;">
    <div style="border-radius: 16px; display:inline-block; width:100%; margin:auto; background-color: #3d3d3de6; text-shadow: 1px 1px black; color:white;">
      <p id="mensagemR"></p>
    </div>
</div>

</body>
</html>